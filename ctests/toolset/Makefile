FILES=xyz

.info LIBDIR=$(LIBDIR)

.export DESTDIR=$(.OBJDIR)
.export LIBDIR=/lib
.export PREFIX=

__TOP=${.CURDIR}/../..
TOOLS_SRCTOP=$(__TOP:tA)
TOOLS_OBJTOP=$(.OBJDIR)
CLEANDIRS+=bin include lib libexec man share usr

.include <mkc.files.mk>

MAKEFLAGS+=	LIBDIR=/lib
MAKEFLAGS+=	DESTDIR=$(.OBJDIR)
MAKEFLAGS+=	PREFIX=

cleandir clean:
	TOOLS_SRCTOP=$(TOOLS_SRCTOP) TOOLS_OBJTOP=$(TOOLS_OBJTOP) MAKEOBJDIR='$$(.CURDIR:C,$(TOOLS_SRCTOP),$(TOOLS_OBJTOP),)' $(MAKE) MAKEFLAGS='$(MAKEFLAGS)' ONLY_TEST_DEPENDENCIES=yes \
	    -C $(.CURDIR)/../.. $(.TARGETS)

$(TARGETS:Nclean:Ncleandir:Ntags):
.for __t in all install
	TOOLS_SRCTOP=$(TOOLS_SRCTOP) TOOLS_OBJTOP=$(TOOLS_OBJTOP) MAKEOBJDIR='$$(.CURDIR:C,$(TOOLS_SRCTOP),$(TOOLS_OBJTOP),)' $(MAKE) MAKEFLAGS='$(MAKEFLAGS)' ONLY_TEST_DEPENDENCIES=yes \
	    -C $(.CURDIR)/../.. ${__t}
.endfor
